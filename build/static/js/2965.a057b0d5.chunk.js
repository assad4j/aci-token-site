"use strict";(self.webpackChunkaci_presale_site=self.webpackChunkaci_presale_site||[]).push([[2965],{62965:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var r=s(9950),n=s(67818),i=s(63309),a=s(44414);const l={emotion:"\u2014",stress:.2,confidence:.6,wpm:null,fillersPerMin:null},o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WALLETCONNECT_PROJECT_ID:"TON_PROJECT_ID_ICI",REACT_APP_PRESALE_CONTRACT_ADDRESS:"0x8257194Ae124EDEA0E434a3D1479e52C5a5C59C4",REACT_APP_PRESALE_CHAIN_ID:"1",REACT_APP_PRESALE_MIN_ETH:"0.01",REACT_APP_PRESALE_MAX_ETH:"50",REACT_APP_PRESALE_STATS_ENDPOINT:"",REACT_APP_PRESALE_NETWORK_LABEL:"Ethereum Mainnet",REACT_APP_PRESALE_RPC_URL:"https://eth-mainnet.g.alchemy.com/v2/bkYap2FHqztpHzjU0deDu",REACT_APP_ANALYTICS_ID:"",REACT_APP_STAKING_CONTRACT_ADDRESS:"0xb151450F16Efef1F312D72E740Ca4b54698755cD",REACT_APP_STAKING_TOKEN_ADDRESS:"0x8257194Ae124EDEA0E434a3D1479e52C5a5C59C4",REACT_APP_STAKING_CHAIN_ID:"1",REACT_APP_STAKING_MIN_AMOUNT:"0",REACT_APP_STAKING_NETWORK_LABEL:"Ethereum Mainnet",REACT_APP_ACI_AI_URL:"http://localhost:3000/api/coach"}.REACT_APP_AUDIO_AI_URL,c=["euh","heu","uh","hum","hmm"],d={angry:"Col\xe8re",disgusted:"D\xe9go\xfbt",disgust:"D\xe9go\xfbt",fear:"Craintif",fearful:"Craintif",happy:"Joyeux",sad:"Triste",surprise:"Surpris",surprised:"Surpris",neutral:"Neutre",calm:"Calme",bored:"Distrait",sleepy:"Somnolent",serious:"S\xe9rieux",confused:"Perplexe",excited:"Enthousiaste",smile:"Sourire"};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return null;const t=e.toLowerCase();return d[t]?d[t]:e.charAt(0).toUpperCase()+e.slice(1)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(s,Math.max(t,e))}function x(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25;return null===e||Number.isNaN(e)?t:e*(1-s)+t*s}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!Number.isFinite(e)||e<0?"\u2014":Number(e).toFixed(t)}function h(e){const t=[];return e.stress>.65&&t.push("Pr\xe9pare un rituel de reset (respiration, ancrage) avant ta prochaine session."),e.confidence<.45&&t.push("\xc9cris ton intention en une phrase cl\xe9 et r\xe9p\xe8te-la \xe0 voix haute avant de d\xe9marrer."),e.fillers>4&&t.push("Pratique un silence conscient : marque une pause d\xe8s que tu sens venir un \u201ceuh\u201d."),e.wpm>110&&t.push("Travaille ton rythme : lis un passage lentement pour t\u2019habituer \xe0 ralentir."),e.confidence>.7&&e.stress<.55&&t.push("Challenge bonus : expose une id\xe9e complexe en 120 secondes lors de la prochaine s\xe9ance."),t.length<3&&t.push("R\xe9p\xe8te la structure \u201cSituation - Action - R\xe9sultat\u201d pour fluidifier ton discours."),t.length<3&&t.push("Installe-toi dans un environnement calme et v\xe9rifie ton mat\xe9riel audio \xe0 l\u2019avance."),t.length<3&&t.push("Hydrate-toi 10 minutes avant la session pour soutenir la qualit\xe9 de ta voix."),t.slice(0,3)}function f(e){let{history:t}=e;const s=(0,r.useMemo)(()=>{if(!t.length)return null;const e=t.length,s=s=>t.map((t,r)=>`${r/(e-1||1)*100},${100-100*t[s]}`).join(" ");return{stress:s("stress"),confidence:s("confidence")}},[t]);return s?(0,a.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"h-40 w-full rounded-2xl border border-white/10 bg-black/40 p-2 text-white",children:[(0,a.jsx)("polyline",{points:s.stress,fill:"none",stroke:"rgb(244, 63, 94)",strokeWidth:"2"}),(0,a.jsx)("polyline",{points:s.confidence,fill:"none",stroke:"rgb(16, 185, 129)",strokeWidth:"2"})]}):(0,a.jsx)("div",{className:"h-40 w-full rounded-2xl border border-white/10 bg-black/40 flex items-center justify-center text-white/60",children:"Aucune donn\xe9e disponible pour cette session."})}function b(e){let{label:t,value:s}=e;const r=100*m(s,0,1)+"%";return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm uppercase text-white/60 tracking-wide",children:[(0,a.jsx)("span",{children:t}),(0,a.jsxs)("span",{children:[p(100*s,0),"%"]})]}),(0,a.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-400 to-rose-500 transition-all duration-500",style:{width:r}})})]})}function g(){let{onMetricsChange:e,onEmotionStateChange:t,onSessionToggle:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[i,d]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[w,j]=(0,r.useState)(l),[N,A]=(0,r.useState)([]),[_,y]=(0,r.useState)(null),[C,E]=(0,r.useState)(null),[S,R]=(0,r.useState)(!1),[T,k]=(0,r.useState)(null),[P,I]=(0,r.useState)("idle"),[M,D]=(0,r.useState)(null),[L,O]=(0,r.useState)(null),[F,H]=(0,r.useState)(null),q=(0,r.useRef)([]),z=(0,r.useRef)(null),U=(0,r.useRef)({counts:{},lastTimestamp:0,total:0}),W=(0,r.useRef)(null),K=(0,r.useRef)(null),B=(0,r.useRef)(null),$=(0,r.useRef)(null),V=(0,r.useMemo)(()=>"undefined"!==typeof window&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window),[]),G=(0,r.useMemo)(()=>{var e,t;const s=m(null!==(e=null===w||void 0===w?void 0:w.stress)&&void 0!==e?e:0,0,1),r=m(null!==(t=null===w||void 0===w?void 0:w.confidence)&&void 0!==t?t:.5,0,1),n=function(e){if(!e)return"neutral";const t=e.toString().toLowerCase();return t.includes("jo")||t.includes("heureux")||t.includes("sour")?"joy":t.includes("calm")||t.includes("zen")?"calm":t.includes("stress")||t.includes("tendu")||t.includes("ango")||t.includes("peur")?"stress":t.includes("trist")||t.includes("fatigu")?"sad":t.includes("col\xe8r")||t.includes("anger")||t.includes("rage")?"anger":t.includes("confian")?"confident":t.includes("enthous")||t.includes("excited")?"excited":(t.includes("neutre"),"neutral")}(null===w||void 0===w?void 0:w.emotion),i=Number.isFinite(null===w||void 0===w?void 0:w.wpm)?w.wpm:null,a=null!=i?m((i-60)/80,0,1):.45,l=m(.6*a+.4*s,0,1);return{emotion:n,stressScore:s,valence:m(.5+.5*(r-s),0,1),arousal:l,confidence:r}},[w]),J=(0,r.useRef)(null),Y=(0,r.useRef)(null),X=(0,r.useRef)(null),Q=(0,r.useRef)(null),Z=(0,r.useRef)({totalWords:0,fillerCount:0,estimatedWords:0}),ee=(0,r.useRef)({wasSpeaking:!1,burstCount:0,volumeHistory:[],speakingSamples:0,totalSamples:0}),te=(0,r.useRef)({energy:null,pitch:null}),se=(0,r.useRef)(0),re=(0,r.useRef)(null),ne=(0,r.useRef)(null),ie=(0,r.useRef)(!1),ae=(0,r.useCallback)(()=>{U.current={counts:{},lastTimestamp:0,total:0},z.current=null,D(null)},[]),le=(0,r.useCallback)(async()=>{if(W.current)return W.current;if("undefined"===typeof window)return null;try{const e=await s.e(6189).then(s.bind(s,66189)),t=new((null===e||void 0===e?void 0:e.default)||(null===e||void 0===e?void 0:e.Human)||e)({cacheSensitivity:0,modelBasePath:"https://vladmandic.github.io/human/models/",face:{enabled:!0,detector:{rotation:!0,maxDetected:1},mesh:{enabled:!1},attention:{enabled:!1},description:{enabled:!1},iris:{enabled:!1},emotion:{enabled:!0}},hand:{enabled:!1},body:{enabled:!1},gesture:{enabled:!1},segmentation:{enabled:!1},filter:{enabled:!0}});return await t.load(),W.current=t,t}catch(e){return console.error("Impossible de charger Human",e),k("Impossible de charger les mod\xe8les d\u2019analyse vid\xe9o."),R(!1),I("idle"),null}},[R,I]),oe=(0,r.useCallback)(()=>{if(B.current&&(cancelAnimationFrame(B.current),B.current=null),K.current){try{K.current.pause()}catch{}K.current.srcObject=null}z.current=null,D(null),I(e=>S||"analysis"===e?"ready":"idle")},[S]),ce=(0,r.useCallback)(e=>{var t;if(!e||!e.label)return z.current=null,void D(null);const s=(e.distribution||[]).map(e=>{var t;return{label:u(e.emotion||e.label||""),score:null!==(t=e.score)&&void 0!==t?t:0}}),r={label:e.label,raw:e.raw||null,score:m(null!==(t=e.score)&&void 0!==t?t:0,0,1),distribution:s};z.current=r,D(r);const n=U.current,i="undefined"!==typeof performance?performance.now():Date.now();(!n.lastTimestamp||i-n.lastTimestamp>900)&&(n.counts[r.label]=(n.counts[r.label]||0)+1,n.total=(n.total||0)+1,n.lastTimestamp=i)},[]),de=(0,r.useCallback)(async()=>{if(!S||!K.current)return;const e=await le();if(!e)return;I("analysis");const t=async()=>{if(ie.current)if(!K.current||K.current.readyState<2)B.current=requestAnimationFrame(t);else{try{var s;const t=await e.detect(K.current);if(null!==t&&void 0!==t&&null!==(s=t.face)&&void 0!==s&&s.length){const e=t.face[0].emotion||[];if(e.length){const t=e.reduce((e,t)=>t.score>e.score?t:e,e[0]);ce({label:u(t.emotion||t.label),raw:t.emotion||t.label,score:t.score,distribution:e})}else ce(null)}else ce(null)}catch(r){console.error("Erreur lors de la d\xe9tection vid\xe9o",r)}B.current=requestAnimationFrame(t)}};B.current=requestAnimationFrame(t)},[le,ce,S]),ue=(0,r.useCallback)(async()=>{if(!g){if(S)return oe(),ae(),R(!1),I("idle"),void k(null);if(k(null),"undefined"!==typeof navigator&&navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia){I("checking");try{(await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}})).getTracks().forEach(e=>e.stop()),R(!0),I("ready")}catch(e){console.error(e),k("Acc\xe8s cam\xe9ra refus\xe9. V\xe9rifie les permissions de ton navigateur."),I("idle"),R(!1)}}else k("La cam\xe9ra n\u2019est pas disponible sur ce navigateur.")}},[ae,g,oe,S]),me=(0,r.useCallback)(()=>{ne.current&&(ne.current.onend=null,ne.current.stop(),ne.current=null)},[]),xe=(0,r.useCallback)(()=>{ie.current=!1,X.current&&(clearInterval(X.current),X.current=null),Q.current&&(Q.current.getTracks().forEach(e=>e.stop()),Q.current=null),J.current&&(J.current.close().catch(()=>{}),J.current=null),Y.current=null,re.current=null,te.current={energy:null,pitch:null},se.current=0,O(null),H(null),oe(),me()},[me,oe]);(0,r.useEffect)(()=>()=>{xe()},[xe]),(0,r.useEffect)(()=>{if(!g||!S)return;const e=Q.current;if(!e||"function"!==typeof e.getVideoTracks)return;if(!(e.getVideoTracks().length>0))return void I("idle");const t=K.current;if(!t)return;t.srcObject!==e&&(t.srcObject=e),t.muted=!0,t.playsInline=!0;const s=t.play();s&&"function"===typeof s.catch&&s.catch(()=>{}),B.current||de()},[g,de,S,I]);const pe=async()=>{y(null),k(null),E(null),A([]),q.current=[],j({...l}),ae(),I(S?"starting":"idle"),ee.current={wasSpeaking:!1,burstCount:0,volumeHistory:[],speakingSamples:0,totalSamples:0},Z.current={totalWords:0,fillerCount:0,estimatedWords:0,fillersPerMin:null},te.current={energy:null,pitch:null},se.current=0,O(null),H(null);let e=S;if("undefined"!==typeof navigator&&navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia)try{let s=null;try{s=await navigator.mediaDevices.getUserMedia({audio:!0,video:!!e&&{facingMode:"user",width:{ideal:640},height:{ideal:480}}})}catch(t){if(!e)throw t;console.error("Video capture unavailable, fallback to audio only",t),k("Impossible d\u2019activer la cam\xe9ra. Passage en mode vocal uniquement."),I("idle"),R(!1),e=!1,s=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}const r=new(window.AudioContext||window.webkitAudioContext);if("suspended"===r.state)try{await r.resume()}catch{}const n=r.createAnalyser();n.fftSize=2048;r.createMediaStreamSource(s).connect(n),J.current=r,Y.current=n,Q.current=s,e&&I("starting"),re.current=performance.now(),ie.current=!0,v(!0),(()=>{if(!V)return;const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.lang="fr-FR",e.continuous=!0,e.interimResults=!0,e.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;s+=1){const r=e.results[s];r.isFinal&&(t+=r[0].transcript)}if(t){const e=t.toLowerCase().replace(/[^a-z\xe0\xe2\xe7\xe9\xe8\xea\xeb\xee\xef\xf4\xfb\xf9\xfc\xff\xf1\xe6\u0153\s]/gi," ").split(/\s+/).filter(Boolean),s=e.filter(e=>c.includes(e));Z.current.totalWords+=e.length,Z.current.fillerCount+=s.length}},e.onerror=e=>{console.warn("Speech recognition error",e.error)},e.onend=()=>{if(ie.current)try{e.start()}catch(_){console.warn("Unable to restart recognition",_)}},e.start(),ne.current=e})(),ge()}catch(s){console.error(s),y("Analyse indisponible. V\xe9rifie que le micro est bien accessible."),xe(),v(!1)}else y("Le microphone n\u2019est pas disponible sur ce navigateur.")},he=()=>{var e;if(!Y.current)return null;const t=Y.current,s=t.fftSize,r=new Float32Array(s);t.getFloatTimeDomainData(r);let n=0;for(let m=0;m<s;m+=1)n+=r[m]*r[m];const i=Math.sqrt(n/s),a=m(i/.15,0,1),l=function(e,t){if(!e||0===e.length)return null;const s=1024,r=Math.min(1023,1023);let n=-1,i=0,a=0;for(let m=0;m<s;m+=1){const t=e[m];a+=t*t}if(a=Math.sqrt(a/s),a<.01)return null;let l=1;const o=new Array(r).fill(0);let c=!1;for(let m=2;m<r;m+=1){let a=0;for(let t=0;t<s;t+=1)a+=Math.abs(e[t]-e[t+m]);if(a=1-a/s,o[m]=a,a>.9&&a>l)c=!0,a>i&&(i=a,n=m);else if(c){var d,u;return n>1&&n<r-1?t/(n+(((null!==(d=o[n+1])&&void 0!==d?d:o[n])-(null!==(u=o[n-1])&&void 0!==u?u:o[n]))/(2*o[n])||0)):t/n}l=a}return i>.01&&n>0?t/n:null}(r,(null===(e=J.current)||void 0===e?void 0:e.sampleRate)||44100),o=ee.current;o.volumeHistory.push(a),o.volumeHistory.length>120&&o.volumeHistory.shift();const c=a>.12;c&&!o.wasSpeaking&&(o.burstCount+=1),o.wasSpeaking=c,o.speakingSamples+=c?1:0,o.totalSamples+=1;const d=o.volumeHistory.reduce((e,t)=>e+t,0)/o.volumeHistory.length,u=o.volumeHistory.reduce((e,t)=>e+(t-d)**2,0)/Math.max(1,o.volumeHistory.length-1);if(!V){const e=3.2*o.burstCount;Z.current.estimatedWords=e}return{normalizedVolume:a,variance:u,speakingRatio:o.speakingSamples/Math.max(1,o.totalSamples),pitch:l,rms:i}},fe=(0,r.useCallback)(e=>{if(!e)return{stress:.35,confidence:.55};const t=te.current;null==t.energy?(t.energy=e.rms,t.pitch=e.pitch||180):(t.energy=.98*t.energy+.02*e.rms,e.pitch&&(t.pitch=.97*t.pitch+.03*e.pitch));const s=e.rms-(t.energy||e.rms),r=e.pitch&&t.pitch?(e.pitch-t.pitch)/Math.max(1,t.pitch):0,n=e.speakingRatio,i=e.variance;let a=m(.3+6*s+.6*i+2*r,0,1),l=m(.5+.6*(n-.4)-.25*i-1.2*s,0,1);if(Number.isFinite(Z.current.fillersPerMin)){const e=Z.current.fillersPerMin;a+=m(.05*e,0,.2),l-=m(.04*e,0,.2)}return{stress:m(a,0,1),confidence:m(l,0,1)}},[]),be=(0,r.useCallback)(async e=>{if(!o||!e)return;const t=performance.now();if(!(t-se.current<5e3)){se.current=t;try{const t={rms:e.rms,variance:e.variance,speakingRatio:e.speakingRatio,pitch:e.pitch,fillersPerMin:Number.isFinite(Z.current.fillersPerMin)?Z.current.fillersPerMin:null},s=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`audio_ai_${s.status}`);const r=await s.json();r&&"object"===typeof r&&(O({summary:r.summary||null,stress:"number"===typeof r.stress?m(r.stress,0,1):null,confidence:"number"===typeof r.confidence?m(r.confidence,0,1):null,source:"ai",timestamp:performance.now()}),H(null))}catch(_){console.warn("[emotion/audio] ai analysis failed",_),H("AI voice analysis unavailable, falling back to local metrics.")}}},[H,O]),ge=()=>{X.current&&clearInterval(X.current),X.current=setInterval(()=>{const e=he();if(!re.current)return;if(!e&&!z.current)return;const t=performance.now()-re.current,s=Math.max(t/6e4,1/60),r=Z.current.totalWords||Z.current.estimatedWords||0,n=Z.current.fillerCount,i=r/s,a=n/s;Z.current.fillersPerMin=Number.isFinite(a)?a:null;const l=e||{normalizedVolume:.15,variance:.04,speakingRatio:.45,rms:.05},o=fe(l),c=m(.25+.6*l.normalizedVolume+.2*l.variance,0,1),d=m(.4+.35*l.speakingRatio-.15*l.variance+.35*(1-c),0,1),u=m(.6*o.stress+.4*c,0,1),p=m(.6*o.confidence+.4*d,0,1);be(l),j(e=>{var s,r,n;let l=x(null!==(s=e.stress)&&void 0!==s?s:.2,u,.22),o=x(null!==(r=e.confidence)&&void 0!==r?r:.6,p,.22);const c=z.current?function(e){if(null===e||void 0===e||!e.label)return null;const{label:t,score:s=.5}=e,r=m(s,.15,1),n=t.toLowerCase();let i=.5,a=.5;return["col\xe8re","stress\xe9","tendu","craintif","d\xe9go\xfbt"].some(e=>n.includes(e))?(i=.75,a=.35):["triste","perplexe","distra","somnolent"].some(e=>n.includes(e))?(i=.6,a=.3):["surpris","surprise"].some(e=>n.includes(e))?(i=.55,a=.55):["joie","joyeux","enthousias","sourire","calme","neutre"].some(e=>n.includes(e))?(i=.3,a=.72):(i=.48,a=.5),{stress:m(i*r+.5*(1-r),0,1),confidence:m(a*r+.5*(1-r),0,1)}}(z.current):null;c&&(l=x(l,c.stress,.35),o=x(o,c.confidence,.35));const d=$.current;d&&("number"===typeof d.stress&&(l=x(l,m(d.stress,0,1),.2)),"number"===typeof d.confidence&&(o=x(o,m(d.confidence,0,1),.2)));const h=(null===(n=z.current)||void 0===n?void 0:n.label)||function(e,t){return e>.75?"Stress\xe9":t>.72&&e<.55?"Confiant":e<.32&&t>=.5?"Calme":t<.35&&e>.5?"Tendu":"Concentr\xe9"}(l,o),f={emotion:h,stress:l,confidence:o,wpm:Number.isFinite(i)?i:null,fillersPerMin:Number.isFinite(a)?a:null};return A(e=>{const s=[...e,{time:t/1e3,stress:l,confidence:o,wpm:f.wpm,fillers:f.fillersPerMin}];return s.length>180&&s.shift(),q.current=s,s}),f}),O(e=>{var t,s;if("ai"===(null===e||void 0===e?void 0:e.source)&&"number"===typeof e.timestamp&&performance.now()-e.timestamp<6e3)return e;const r=Math.abs((null!==(t=null===e||void 0===e?void 0:e.stress)&&void 0!==t?t:0)-u),n=Math.abs((null!==(s=null===e||void 0===e?void 0:e.confidence)&&void 0!==s?s:0)-p);return"local"===(null===e||void 0===e?void 0:e.source)&&r<.03&&n<.03?e:{summary:(i=u,a=p,o=l.pitch,Number.isFinite(i)&&Number.isFinite(a)?i>.7&&a<.45?"Tension \xe9lev\xe9e d\xe9tect\xe9e : on ralentit et on rel\xe2che les \xe9paules avant de poursuivre.":i>.6&&a>=.45?"Beaucoup d'\xe9nergie ! Canalise-la en clarifiant ce que tu veux exprimer maintenant.":a>.7&&i<.5?"Voix stable et assur\xe9e, parfait pour d\xe9rouler ton plan.":a<.45&&i<.5?"Ton ton est calme mais h\xe9sitant : formule ta prochaine id\xe9e en une phrase forte.":o&&o>280&&i>.5?"La voix monte beaucoup, signe d'\xe9motion. Ralentis et respire pour garder la clart\xe9.":"Voix \xe9quilibr\xe9e : reste sur ce rythme et articule tes id\xe9es principales.":"Je capte ta voix, continue \xe0 parler pour une analyse compl\xe8te."),stress:u,confidence:p,source:"local",timestamp:performance.now()};var i,a,o})},750)},ve=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t.length)return void E(null);const s=t.reduce((e,t)=>(e.stress+=t.stress,e.confidence+=t.confidence,Number.isFinite(t.wpm)&&(e.wpmSum+=t.wpm,e.wpmCount+=1),Number.isFinite(t.fillers)&&(e.fillers+=t.fillers,e.fillersCount+=1),e),{stress:0,confidence:0,wpmSum:0,wpmCount:0,fillers:0,fillersCount:0}),r=t.length,n={stress:s.stress/r,confidence:s.confidence/r,wpm:s.wpmCount?s.wpmSum/s.wpmCount:null,fillers:s.fillersCount?s.fillers/s.fillersCount:null},i=U.current,a=Object.entries((null===i||void 0===i?void 0:i.counts)||{}),l=null!==(e=null===i||void 0===i?void 0:i.total)&&void 0!==e?e:a.reduce((e,t)=>{let[,s]=t;return e+s},0);let o=null;if(a.length&&l>0){const e=[...a].sort((e,t)=>t[1]-e[1]);o={dominant:e[0][0],total:l,distribution:e.slice(0,4).map(e=>{let[t,s]=e;return{label:t,ratio:s/l}})}}E({averages:n,advice:h(n),history:[...t],video:o})},we=(0,r.useMemo)(()=>function(e){let{stress:t,confidence:s,fillersPerMin:r,wpm:n}=e;return t>.72||Number.isFinite(r)&&r>6?"On respire 10 secondes, rel\xe2che les \xe9paules et reprends avec un rythme pos\xe9.":s<.4&&Number.isFinite(r)&&r>=3?"Formule un objectif simple en une phrase avant de continuer. \xc7a clarifie le message.":s>.7&&t<.6&&Number.isFinite(n)&&n>=90?"Super \xe9nergie ! Propose-toi un mini-challenge de 2 minutes pour pousser un argument.":s<.45?"Prends 2 inspirations profondes et recentre ton message sur une id\xe9e ma\xeetresse.":"Maintiens ce ton clair. Garde le regard sur ton plan et avance \xe9tape par \xe9tape."}(w),[w]);return(0,r.useEffect)(()=>{$.current=L},[L]),(0,r.useEffect)(()=>{e&&e(w)},[w,e]),(0,r.useEffect)(()=>{t&&t(G)},[G,t]),(0,r.useEffect)(()=>{n&&n(g)},[g,n]),(0,a.jsx)("section",{className:"mt-16",children:(0,a.jsxs)("div",{className:"rounded-3xl border border-emerald-500/30 bg-black/70 p-8 shadow-xl shadow-emerald-500/10 backdrop-blur",children:[(0,a.jsxs)("header",{className:"space-y-2 text-white",children:[(0,a.jsx)("p",{className:"text-sm uppercase tracking-[0.3em] text-emerald-300/80",children:"ACI Meta Coach"}),(0,a.jsx)("h2",{className:"text-3xl font-bold md:text-4xl",children:"Module de d\xe9tection d\u2019\xe9motions (voix + cam\xe9ra)"}),(0,a.jsx)("p",{className:"max-w-2xl text-base text-white/70 leading-relaxed",children:"Analyse en direct de la voix pour aider le coach \xe0 adapter ses messages : \xe9motion dominante, niveau de stress, confiance, rythme de parole et h\xe9sitations. Active aussi la cam\xe9ra pour enrichir l\u2019analyse via les expressions faciales (traitement 100% local dans le navigateur)."})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-4 text-sm text-emerald-200/90",children:[(0,a.jsx)("span",{className:"rounded-full bg-emerald-500/10 px-4 py-1",children:"Analyse vocale active pour mieux t\u2019adapter en temps r\xe9el."}),(0,a.jsxs)("button",{type:"button",onClick:ue,disabled:g||"checking"===P,className:`flex items-center gap-2 rounded-full border px-3 py-1 text-white/70 transition ${S?"border-emerald-400/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-300/60":"border-white/10 hover:border-emerald-400/60 hover:text-emerald-200"} ${g?"cursor-not-allowed opacity-60":"checking"===P?"cursor-progress opacity-60":""}`,title:g?"Arr\xeate la session pour modifier l\u2019analyse vid\xe9o.":S?"D\xe9sactiver l\u2019analyse vid\xe9o":"Activer l\u2019analyse vid\xe9o",children:[(0,a.jsx)("span",{className:"inline-flex h-3 w-6 items-center rounded-full bg-white/10 px-0.5",children:(0,a.jsx)("span",{className:"h-2 w-2 rounded-full transition "+("checking"===P?"bg-amber-300":S?"bg-emerald-400":"bg-white/30")})}),"checking"===P?"Autorisation cam\xe9ra...":S?"Analyse vid\xe9o activ\xe9e":"Activer l\u2019analyse vid\xe9o"]})]}),!i&&(0,a.jsxs)("div",{className:"mt-8 rounded-2xl border border-white/10 bg-white/5 p-6 text-white",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Consentement requis"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-white/70",children:"Pour lancer la d\xe9tection d\u2019\xe9motions, autorise l\u2019acc\xe8s au microphone. Le flux audio reste local, seules les m\xe9triques calcul\xe9es sont affich\xe9es."}),(0,a.jsx)("button",{onClick:async()=>{if(y(null),"undefined"!==typeof navigator&&navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia)try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})).getTracks().forEach(e=>e.stop()),d(!0)}catch(e){console.error(e),y("Impossible d\u2019acc\xe9der au microphone. V\xe9rifie les permissions de ton navigateur.")}else y("Le microphone n\u2019est pas disponible sur ce navigateur.")},className:"mt-4 inline-flex items-center justify-center rounded-full bg-emerald-500 px-6 py-2 text-sm font-semibold text-black transition hover:bg-emerald-400",children:"Autoriser l\u2019analyse vocale"}),_&&(0,a.jsx)("p",{className:"mt-3 text-sm text-rose-300",children:_})]}),i&&!g&&(0,a.jsxs)("div",{className:"mt-8 rounded-2xl border border-white/10 bg-white/5 p-6 text-white space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-white/70",children:"Tout est pr\xeat pour une session voix. Clique sur d\xe9marrer et parle comme en situation r\xe9elle. Tu peux stopper \xe0 tout moment pour consulter le bilan de fin de session."}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)("button",{onClick:pe,className:"inline-flex items-center justify-center rounded-full bg-emerald-500 px-6 py-2 text-sm font-semibold text-black transition hover:bg-emerald-400",children:"Commencer une session"}),(0,a.jsx)("button",{onClick:ue,disabled:"checking"===P,className:`inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold transition ${S?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-300/60":"border border-white/20 text-white/70 hover:border-emerald-400/60 hover:text-emerald-200"} ${"checking"===P?"opacity-60 cursor-not-allowed":""}`,children:S?"ready"===P?"Cam\xe9ra pr\xeate":"Cam\xe9ra activ\xe9e":"checking"===P?"Autorisation cam\xe9ra...":"Activer la cam\xe9ra"})]}),C&&(0,a.jsx)("p",{className:"text-xs text-white/50",children:"R\xe9sultat pr\xe9c\xe9dent disponible plus bas."}),_&&(0,a.jsx)("p",{className:"mt-2 text-sm text-rose-300",children:_}),T&&(0,a.jsx)("p",{className:"text-xs text-rose-300",children:T})]}),g&&(0,a.jsxs)("div",{className:"mt-8 grid gap-8 lg:grid-cols-[1.4fr,1fr]",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-white space-y-6",children:[(S||M)&&(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 bg-black/60",children:[(0,a.jsx)("video",{ref:K,autoPlay:!0,muted:!0,playsInline:!0,className:"block h-full min-h-[220px] w-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-4 text-sm text-white",children:null!==M&&void 0!==M&&M.label?(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("span",{className:"text-base font-semibold",children:M.label}),(0,a.jsxs)("span",{className:"text-xs text-white/60",children:[(100*M.score).toFixed(0),"% confiance"]})]}):(0,a.jsx)("span",{className:"text-xs text-white/60",children:"analysis"===P?"Analyse vid\xe9o en cours...":"Cam\xe9ra pr\xeate, maintien ton visage face \xe0 l\u2019objectif."})})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"\xc9motion"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold text-white",children:w.emotion})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"Vitesse de parole"}),(0,a.jsxs)("p",{className:"mt-2 text-2xl font-semibold text-white",children:[p(w.wpm,0)," ",(0,a.jsx)("span",{className:"text-sm text-white/60",children:"mots/min"})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"\u201cEuh\u201d par minute"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold text-white",children:p(w.fillersPerMin,1)})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"Analyse vocale IA"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-white/70 leading-relaxed",children:null!==L&&void 0!==L&&L.summary?L.summary:F||"Je mesure ton ton, ton \xe9nergie et ta stabilit\xe9 pour ajuster ton coaching en direct."})]})]}),(0,a.jsx)(b,{label:"Stress",value:w.stress}),(0,a.jsx)(b,{label:"Confiance",value:w.confidence}),(0,a.jsxs)("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/10 p-4 text-white",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-emerald-200 tracking-wide",children:"Coach"}),(0,a.jsx)("p",{className:"mt-2 text-base leading-relaxed text-emerald-50",children:we})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between rounded-2xl border border-white/10 bg-white/5 p-6 text-white",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm uppercase text-white/60 tracking-wide",children:"Session en cours"}),(0,a.jsx)("p",{className:"text-base text-white/70",children:"Les m\xe9triques sont mises \xe0 jour toutes les 750 ms pour garder un affichage fluide."}),T&&(0,a.jsx)("p",{className:"text-xs text-rose-300",children:T}),F&&(0,a.jsx)("p",{className:"text-xs text-amber-300",children:F})]}),(0,a.jsx)("button",{onClick:()=>function(){let{withSummary:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(!1),xe(),e){const e=q.current;e.length&&ve(e)}}(),className:"mt-6 inline-flex items-center justify-center rounded-full bg-rose-500 px-6 py-2 text-sm font-semibold text-black transition hover:bg-rose-400",children:"Arr\xeater et afficher le bilan"})]})]}),C&&(0,a.jsxs)("div",{className:"mt-10 rounded-3xl border border-white/10 bg-white/5 p-6 text-white space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:"Bilan de la session"}),(0,a.jsxs)("span",{className:"text-sm text-white/60",children:["Stress (rose) \u2022 Confiance (vert) sur ",C.history.length," points"]})]}),(0,a.jsx)(f,{history:C.history}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"Stress moyen"}),(0,a.jsxs)("p",{className:"mt-2 text-xl font-semibold text-white",children:[p(100*C.averages.stress,0),"%"]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"Confiance moyenne"}),(0,a.jsxs)("p",{className:"mt-2 text-xl font-semibold text-white",children:[p(100*C.averages.confidence,0),"%"]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"Rythme global"}),(0,a.jsxs)("p",{className:"mt-2 text-xl font-semibold text-white",children:[p(C.averages.wpm,0)," mots/min"]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 sm:col-span-3",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"\u201cEuh\u201d moyen"}),(0,a.jsxs)("p",{className:"mt-2 text-xl font-semibold text-white",children:[p(C.averages.fillers,1)," par minute"]})]}),C.video&&(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 sm:col-span-3",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-white/50 tracking-wide",children:"\xc9motions visuelles d\xe9tect\xe9es"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-white/80",children:[(0,a.jsxs)("span",{className:"rounded-full bg-white/10 px-3 py-1",children:["Dominante : ",C.video.dominant]}),C.video.distribution.map(e=>(0,a.jsxs)("span",{className:"rounded-full border border-white/10 px-3 py-1",children:[e.label," \xb7 ",p(100*e.ratio,0),"%"]},e.label))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm uppercase text-white/60 tracking-wide",children:"3 conseils pour la prochaine fois"}),(0,a.jsx)("ul",{className:"mt-3 space-y-2 text-sm text-white/80",children:C.advice.map((e,t)=>(0,a.jsx)("li",{className:"rounded-2xl border border-white/10 bg-black/40 p-3",children:e},t))})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsx)("button",{onClick:pe,className:"inline-flex items-center justify-center rounded-full bg-emerald-500 px-6 py-2 text-sm font-semibold text-black transition hover:bg-emerald-400",children:"Relancer une session"}),(0,a.jsx)("p",{className:"text-xs text-white/50",children:"Les donn\xe9es restent c\xf4t\xe9 navigateur. Relance la d\xe9tection quand tu veux."})]})]})]})})}var v=s(35218),w=s(52111),j=s(42605),N=s(35355),A=s(42342),_=s(13437);const y={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WALLETCONNECT_PROJECT_ID:"TON_PROJECT_ID_ICI",REACT_APP_PRESALE_CONTRACT_ADDRESS:"0x8257194Ae124EDEA0E434a3D1479e52C5a5C59C4",REACT_APP_PRESALE_CHAIN_ID:"1",REACT_APP_PRESALE_MIN_ETH:"0.01",REACT_APP_PRESALE_MAX_ETH:"50",REACT_APP_PRESALE_STATS_ENDPOINT:"",REACT_APP_PRESALE_NETWORK_LABEL:"Ethereum Mainnet",REACT_APP_PRESALE_RPC_URL:"https://eth-mainnet.g.alchemy.com/v2/bkYap2FHqztpHzjU0deDu",REACT_APP_ANALYTICS_ID:"",REACT_APP_STAKING_CONTRACT_ADDRESS:"0xb151450F16Efef1F312D72E740Ca4b54698755cD",REACT_APP_STAKING_TOKEN_ADDRESS:"0x8257194Ae124EDEA0E434a3D1479e52C5a5C59C4",REACT_APP_STAKING_CHAIN_ID:"1",REACT_APP_STAKING_MIN_AMOUNT:"0",REACT_APP_STAKING_NETWORK_LABEL:"Ethereum Mainnet",REACT_APP_ACI_AI_URL:"http://localhost:3000/api/coach"}.REACT_APP_AVATAR_GLTF||"/assets/aci-coach.glb";function C(e){let{url:t}=e;const{scene:s}=(0,j.p)(t);return(0,a.jsx)(N.i,{object:s})}function E(){return(0,a.jsx)(A.E,{center:!0,children:(0,a.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/50 px-3 py-2 text-xs text-white/70",children:"Loading coach\u2026"})})}function S(e){let{count:t=140,radius:s=4.2}=e;const n=(0,r.useMemo)(()=>new _.BufferGeometry,[]),i=(0,r.useRef)(),l=(0,r.useMemo)(()=>{const e=new Float32Array(3*t);for(let r=0;r<t;r+=1){const t=Math.random()*Math.PI*2,n=Math.acos(_.MathUtils.randFloatSpread(1)),i=s+.25*Math.random();e[3*r]=i*Math.sin(n)*Math.cos(t),e[3*r+1]=i*Math.sin(n)*Math.sin(t)+.35,e[3*r+2]=i*Math.cos(n)-1.7}return e},[t,s]);return(0,r.useMemo)(()=>{n.setAttribute("position",new _.BufferAttribute(l,3))},[n,l]),(0,v.F)(e=>{let{clock:t}=e;if(!i.current)return;const s=t.getElapsedTime();i.current.opacity=.28+.05*Math.sin(1.6*s),i.current.size=.07+.015*Math.cos(.9*s)}),(0,a.jsx)("points",{geometry:n,position:[0,0,-1.85],children:(0,a.jsx)("pointsMaterial",{ref:i,color:"#fbe7c3",size:.07,sizeAttenuation:!0,transparent:!0,opacity:.32})})}function R(e){let{url:t,orientation:s="right"}=e;const n=(0,r.useRef)(),i="left"===s?-1:1,l=i*(Math.PI/9);return(0,v.F)(e=>{let{clock:t}=e;if(!n.current)return;const s=t.getElapsedTime();n.current.rotation.y=l+i*Math.sin(.4*s)*.07,n.current.rotation.x=.02*Math.sin(.25*s),n.current.position.y=.04*Math.sin(1.1*s)-1.1}),(0,a.jsx)("group",{ref:n,rotation:[0,l,0],position:[0,-1.1,0],children:(0,a.jsx)(C,{url:t})})}function T(e){let{width:t=520,className:s="",orientation:n="right"}=e;const i="number"===typeof t?`${t}px`:t;return(0,a.jsxs)("div",{className:`relative w-full ${s}`,style:{maxWidth:i,minWidth:"min(280px, 100%)"},children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 -z-20 rounded-[28px] bg-gradient-to-br from-[#52ffe6]/20 via-transparent to-[#fcd34d]/25 blur-[38px]"}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-[6%] -z-30 rounded-[48px] border border-white/5"}),(0,a.jsxs)("div",{className:"relative aspect-square w-full overflow-hidden rounded-[22px] border border-emerald-200/35 bg-[radial-gradient(65%_60%_at_50%_15%,rgba(255,220,128,0.22),rgba(6,10,18,0.9))] shadow-[0_25px_70px_-28px_rgba(16,185,129,0.65)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.08)_0%,rgba(255,255,255,0)_35%,rgba(255,255,255,0.08)_70%)] opacity-50 mix-blend-screen"}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[radial-gradient(45%_45%_at_50%_20%,rgba(250,204,21,0.25),rgba(15,23,42,0))]"}),(0,a.jsxs)("div",{className:"pointer-events-none absolute left-6 top-6 z-20 flex items-center gap-3 rounded-full border border-white/15 bg-black/55 px-5 py-2 text-[0.7rem] font-semibold uppercase tracking-[0.35em] text-emerald-100 shadow-[0_12px_30px_-18px_rgba(59,130,246,0.65)] backdrop-blur-md",children:[(0,a.jsx)("span",{className:"h-2.5 w-2.5 rounded-full bg-[radial-gradient(circle,rgba(250,204,21,1)_0%,rgba(190,149,34,0.4)_60%,rgba(250,204,21,0)_100%)] shadow-[0_0_12px_rgba(250,204,21,0.9)]"}),"ACI Coach"]}),(0,a.jsxs)(w.Hl,{camera:{position:[0,1.6,4],fov:32},gl:{antialias:!0,alpha:!0,preserveDrawingBuffer:!1},frameloop:"always",style:{width:"100%",height:"100%"},children:[(0,a.jsx)(S,{}),(0,a.jsx)("ambientLight",{intensity:.8}),(0,a.jsx)("directionalLight",{intensity:1.35,position:[2.2,3.8,1.6],color:"#fbe18c"}),(0,a.jsx)("directionalLight",{intensity:.6,position:[-2,3,-1],color:"#34d399"}),(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(E,{}),children:(0,a.jsx)(R,{url:y,orientation:n})})]}),(0,a.jsxs)("div",{className:"pointer-events-none absolute inset-x-6 bottom-6 z-20 rounded-2xl border border-emerald-200/20 bg-black/65 px-5 py-4 backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[0.65rem] uppercase tracking-[0.3em] text-emerald-100/80",children:["Mode focus",(0,a.jsx)("span",{className:"rounded-full bg-emerald-300/15 px-3 py-1 text-[0.6rem] font-semibold tracking-[0.2em] text-emerald-100",children:"Concierge IA"})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs text-white/80",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-emerald-200/70",children:"Profil"}),(0,a.jsx)("p",{className:"mt-1 font-semibold text-white",children:"Analyse comportementale pr\xeate"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-emerald-200/70",children:"Business"}),(0,a.jsx)("p",{className:"mt-1 font-semibold text-white",children:"3 id\xe9es qualifi\xe9es"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-emerald-200/70",children:"Conciergerie"}),(0,a.jsx)("p",{className:"mt-1 font-semibold text-white",children:"Rendez-vous en cours"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-emerald-200/70",children:"Mindset"}),(0,a.jsx)("p",{className:"mt-1 font-semibold text-white",children:"Routine anti-stress activ\xe9e"})]})]})]})]})]})}function k(){const e=(0,r.useRef)(null),t=(0,r.useRef)(!1),[s,n]=(0,r.useState)(!1),i=(0,r.useMemo)(()=>[{role:"coach",label:"Coach ACI",accent:"text-emerald-300",text:"Je viens d\u2019analyser ton profil et ta fa\xe7on de travailler : tu veux que je cible un business rentable ou que je renforce ta pr\xe9sence actuelle ?"},{role:"user",label:"Toi",accent:"text-amber-300",text:"Je veux un plan clair et un business qui correspond \xe0 mon \xe9nergie, sans perdre de temps."},{role:"coach",label:"Coach ACI",accent:"text-emerald-300",text:"Je s\xe9lectionne trois id\xe9es align\xe9es sur tes comp\xe9tences, je r\xe9serve les rendez-vous n\xe9cessaires et j\u2019active la conciergerie paiement et d\xe9placement."}],[]),[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(0),[u,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const s=e.current;if(!s||t.current)return;const r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!t.current&&(t.current=!0,n(!0))})},{threshold:.35});return r.observe(s),()=>r.disconnect()},[]),(0,r.useEffect)(()=>{if(!s)return;let e=!1;if(c>=i.length)return p(null),void m("");const t=i[c],r=t.text;let n=0;p(t);const a=setInterval(()=>{if(!e&&(n+=1,m(r.slice(0,n)),n>=r.length)){if(clearInterval(a),e)return;o(e=>[...e,t]),p(null),setTimeout(()=>{e||(m(""),d(e=>e+1))},900)}},45);return()=>{e=!0,clearInterval(a)}},[i,s,c]),(0,a.jsxs)("section",{ref:e,className:"mt-16 grid gap-8 lg:grid-cols-[1fr_520px] lg:items-start",children:[(0,a.jsxs)("div",{className:"space-y-4 text-white/80",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Coach IA business pro (d\xe9mo anim\xe9e)"}),(0,a.jsx)("p",{className:"leading-relaxed",children:"Aper\xe7u du mode business : l\u2019IA analyse votre profil, identifie les opportunit\xe9s adapt\xe9es et active la conciergerie pour organiser paiements, rendez-vous et d\xe9placements."}),(0,a.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 text-sm leading-relaxed text-white/80",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[l.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:`font-semibold ${e.accent}`,children:e.label}),(0,a.jsx)("p",{className:"mt-1 text-white/75",children:e.text})]},`${e.role}-${e.text}`)),x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:`font-semibold ${x.accent}`,children:x.label}),(0,a.jsxs)("p",{className:"mt-1 text-white/70",children:[u,(0,a.jsx)("span",{className:"ml-1 animate-pulse",children:"\u25ae"})]})]}),!x&&0===l.length&&(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.22em] text-white/40",children:"Faites d\xe9filer pour lancer la d\xe9mo"})]})})]}),(0,a.jsx)("div",{className:"mx-auto w-full max-w-[520px] min-[320px]:max-w-[420px] sm:max-w-[480px]",children:(0,a.jsx)(T,{width:520,orientation:"left"})})]})}function P(e){let{orientation:t="video-left",title:s,description:n,messageSequence:i}=e;const l=(0,r.useRef)(null),o=(0,r.useRef)(!1),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>[{role:"coach",label:"Coach ACI",accent:"text-emerald-300",text:"Salut, je suis ton coach IA ACI. On d\xe9marre ensemble pour stabiliser ton mindset ?"},{role:"user",label:"Toi",accent:"text-amber-300",text:"Impressionnant ! Comment vas-tu personnaliser ma routine ?"},{role:"coach",label:"Coach ACI",accent:"text-emerald-300",text:"Je d\xe9tecte ton \xe9nergie, j\u2019analyse ta voix et je choisis ton prochain d\xe9fi pr\xe9cis. La version interactive arrive tr\xe8s vite, on se retrouve pour la suite."}],[]),m=(0,r.useMemo)(()=>Array.isArray(i)&&i.length>0?i:u,[i,u]),x=null!==s&&void 0!==s?s:"Coach IA (d\xe9mo anim\xe9e)",p=null!==n&&void 0!==n?n:"Aper\xe7u du Coach IA : l\u2019astronaute \xe9change un court dialogue automatique pour illustrer l\u2019exp\xe9rience \xe0 venir. La version interactive (voix, \xe9motions, routines) sera bient\xf4t disponible.",h="video-right"!==t,[f,b]=(0,r.useState)([]),[g,v]=(0,r.useState)(0),[w,j]=(0,r.useState)(""),[N,A]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=l.current;if(!e||o.current)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!o.current&&(o.current=!0,d(!0))})},{threshold:.4});return t.observe(e),()=>t.disconnect()},[]),(0,r.useEffect)(()=>{if(!c)return;let e=!1;if(g>=m.length)return A(null),void j("");const t=m[g],s=t.text;let r=0;A(t);const n=setInterval(()=>{if(!e&&(r+=1,j(s.slice(0,r)),r>=s.length)){if(clearInterval(n),e)return;b(e=>[...e,t]),A(null),setTimeout(()=>{e||(j(""),v(e=>e+1))},900)}},45);return()=>{e=!0,clearInterval(n)}},[m,c,g]);const _=(0,a.jsxs)("div",{className:"space-y-4 text-white/80",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:x}),(0,a.jsx)("p",{className:"leading-relaxed",children:p}),(0,a.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 text-sm leading-relaxed text-white/80",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[f.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:`font-semibold ${e.accent}`,children:e.label}),(0,a.jsx)("p",{className:"mt-1 text-white/75",children:e.text})]},`${e.role}-${e.text}`)),N&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:`font-semibold ${N.accent}`,children:N.label}),(0,a.jsxs)("p",{className:"mt-1 text-white/70",children:[w,(0,a.jsx)("span",{className:"ml-1 animate-pulse",children:"\u25ae"})]})]}),!N&&0===f.length&&(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.22em] text-white/40",children:"Faites d\xe9filer pour lancer la d\xe9mo"})]})})]}),y=h?"right":"left",C=(0,a.jsx)("div",{className:"mx-auto w-full max-w-[520px] min-[320px]:max-w-[420px] sm:max-w-[480px]",children:(0,a.jsx)(T,{width:520,orientation:y})});return(0,a.jsx)("section",{ref:l,className:"mt-16 grid gap-8 lg:items-start "+(h?"lg:grid-cols-[520px_1fr]":"lg:grid-cols-[1fr_520px]"),children:h?(0,a.jsxs)(a.Fragment,{children:[C,_]}):(0,a.jsxs)(a.Fragment,{children:[_,C]})})}function I(){const{t:e}=(0,n.Bd)(),[t,s]=(0,r.useState)(null),[l,o]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>{if(t)return{...t}},[t]);return(0,a.jsxs)("div",{className:"py-20",children:[(0,a.jsxs)("div",{className:"mb-12 text-center text-white",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold sm:text-5xl",children:e("coachIAPage.title")}),(0,a.jsx)("p",{className:"mx-auto mt-4 max-w-2xl text-base text-white/70 leading-relaxed",children:e("coachIAPage.intro")})]}),(0,a.jsx)(i.A,{variant:"page"}),(0,a.jsx)(k,{}),(0,a.jsx)(g,{onEmotionStateChange:s,onSessionToggle:o}),(0,a.jsx)(P,{emotionState:c,isEmotionStreamLive:l})]})}j.p.preload(y)},63309:(e,t,s)=>{s.d(t,{A:()=>a});s(9950);var r=s(67818),n=s(24492),i=s(44414);function a(e){let{variant:t="page"}=e;const s="home"===t,{t:a}=(0,r.Bd)(),l=a("coachIASection.bullets",{returnObjects:!0})||[],o=a("coachIASection.cta",{returnObjects:!0})||{};return(0,i.jsxs)("section",{className:"relative overflow-hidden "+(s?"py-16":"py-20"),children:[(0,i.jsx)("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-emerald-600/10 via-black/70 to-black/90"}),(0,i.jsxs)("div",{className:"relative z-10 mx-auto max-w-4xl text-white",children:[(0,i.jsxs)("div",{className:"text-center space-y-6",children:[(0,i.jsx)("p",{className:"text-sm uppercase tracking-[0.4em] text-emerald-300/80",children:a("coachIASection.badge")}),(0,i.jsx)("h2",{className:(s?"text-3xl md:text-4xl":"text-4xl md:text-5xl")+" font-bold text-balance",children:a("coachIASection."+(s?"titleHome":"titlePage"))}),(0,i.jsx)("p",{className:"text-lg text-white/70 leading-relaxed",children:a("coachIASection.subtitle")})]}),(0,i.jsx)("div",{className:"mt-12 grid gap-6 sm:grid-cols-2",children:l.map(e=>(0,i.jsx)("div",{className:"rounded-3xl border border-emerald-500/30 bg-black/60 p-6 shadow-xl shadow-emerald-500/10 backdrop-blur",children:(0,i.jsx)("p",{className:"text-sm leading-relaxed text-white/80",children:e})},e))}),(0,i.jsxs)("div",{className:"mt-12 flex flex-col items-center gap-4 sm:flex-row sm:justify-center",children:[(0,i.jsx)(n.N_,{to:"/contact",className:"rounded-full bg-[#10b981] px-8 py-3 text-sm font-semibold text-black transition hover:bg-[#00fff7]",children:o.contact}),(0,i.jsx)(n.N_,{to:"/token",className:"rounded-full border border-white/20 px-8 py-3 text-sm font-semibold text-white transition hover:border-[#10b981] hover:text-[#10b981]",children:o.token})]})]})]})}}}]);